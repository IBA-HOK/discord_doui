<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>同意書フォーム</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="container">
        <h1>同意書フォーム</h1>
        <% if (message) { %>
            <p style="color: var(--green); text-align: center;"><%= message %></p>
        <% } %>
        <form method="post">
            <% fields.forEach(field => { %>
                <div class="form-field">
                    <label for="field-<%= field.id %>"><%= field.label %></label>
                    <% const answer = answers.find(a => a.field_id === field.id) || { value: '' }; %>
                    
                    <% if (field.type === 'text') { %>
                        <input type="text" id="field-<%= field.id %>" name="<%= field.id %>" value="<%= answer.value %>" required>
                    <% } else if (field.type === 'textarea') { %>
                        <textarea id="field-<%= field.id %>" name="<%= field.id %>" required><%= answer.value %></textarea>
                    <% } else if (field.type === 'radio' && field.options) { %>
                        <div class="radio-group">
                        <% JSON.parse(field.options).forEach(option => { %>
                            <label>
                                <input type="radio" name="<%= field.id %>" value="<%= option %>" <%= answer.value === option ? 'checked' : '' %> required>
                                <span></span>
                                <%= option %>
                            </label>
                        <% }); %>
                        </div>
                    <% } %>
                </div>
            <% }); %>
            <button type="submit" class="btn btn-primary">同意して送信する</button>
        </form>
    </div>
</body>
</html>
